<% row_options ||= {} %>
<%# --- everything above this line is an optional parameter %>
<% number_of_columns ||= (total_count > 10 ? 5 : (total_count > 5 ? 3 : 2)) %>

<% if (index % number_of_columns) == 0 %>
  <tr <% row_options.map{ |(k,v)| %><%= k %>="<%= v %>" <% } %>>
<% end %>
  <td>
    <%= yield %>
  </td>
<% if ((index+1 % number_of_columns) == 0) || (index+1 == total_count ) %>
  </tr>
<% end %>

<% number_of_columns = 5 %>
<div class="field">
  <span class="field-label">Monsters</span>
  <fieldset id="campaign_monsters" class="expanding-fieldset-container">
    <table class="fixed-table">
      <%= f.fields_for :campaign_monsters, monsters.order_by_name do |x| %>
        <% monster = x.object %>
        <%= render :layout => 'layouts/fixed_table_columns', :locals => { :index => x.index, :number_of_columns => number_of_columns, :total_count => monsters.count } do %>
          <% campaign_monster = f.object.campaign_monsters.select{ |cm| cm.monster_id == monster.id }.first %>
          <%= x.hidden_field :id, :value => campaign_monster.try(:id) %>
          <%= x.hidden_field :monster_id, :value => monster.id %>
          <%= x.check_box "_destroy", { checked: campaign_monster.present? }, "false", "true" %>
          <span title="<%= monster.name %>"><%= monster.name %></span>
        <% end %>
      <% end %>
    </table>
  </fieldset>
</div>

